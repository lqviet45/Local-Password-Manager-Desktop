<UserControl x:Class="PasswordManager.Desktop.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:viewmodels="clr-namespace:PasswordManager.Desktop.ViewModels"
             d:DataContext="{d:DesignInstance Type=viewmodels:SettingsViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="900">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="40,30">
            
            <!-- Header -->
            <TextBlock Text="Settings" 
                     FontSize="28"
                     FontWeight="Bold"
                     Foreground="#212121"
                     Margin="0,0,0,30"/>

            <!-- Account Section -->
            <Border Background="White"
                    CornerRadius="10"
                    Padding="25"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Account" 
                             FontSize="18"
                             FontWeight="SemiBold"
                             Margin="0,0,0,20"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                 Text="Email:" 
                                 FontWeight="SemiBold"
                                 Margin="0,0,0,15"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" 
                                 Text="{Binding UserEmail}"
                                 Margin="0,0,0,15"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" 
                                 Text="Account Type:" 
                                 FontWeight="SemiBold"
                                 Margin="0,0,0,15"/>
                        <StackPanel Grid.Row="1" Grid.Column="1" 
                                  Orientation="Horizontal"
                                  Margin="0,0,0,15">
                            <TextBlock Text="{Binding IsPremium, Converter={StaticResource PremiumTextConverter}}"/>
                            <Button Command="{Binding UpgradeToPremiumCommand}"
                                  Content="Upgrade to Premium"
                                  Padding="12,6"
                                  Margin="15,0,0,0"
                                  Visibility="{Binding IsPremium, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                        </StackPanel>

                        <TextBlock Grid.Row="2" Grid.Column="0" 
                                 Text="Member Since:" 
                                 FontWeight="SemiBold"
                                 Margin="0,0,0,15"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" 
                                 Text="{Binding AccountCreatedDate, StringFormat='MMMM dd, yyyy'}"
                                 Margin="0,0,0,15"/>

                        <TextBlock Grid.Row="3" Grid.Column="0" 
                                 Text="Master Password:" 
                                 FontWeight="SemiBold"/>
                        <Button Grid.Row="3" Grid.Column="1" 
                              Command="{Binding ChangeMasterPasswordCommand}"
                              Content="Change Master Password"
                              Padding="12,6"
                              HorizontalAlignment="Left"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Security Section -->
            <Border Background="White"
                    CornerRadius="10"
                    Padding="25"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Security" 
                             FontSize="18"
                             FontWeight="SemiBold"
                             Margin="0,0,0,20"/>

                    <CheckBox IsChecked="{Binding EnableAutoLock}"
                            Content="Enable auto-lock after inactivity"
                            Margin="0,0,0,15"/>

                    <StackPanel Orientation="Horizontal"
                              Margin="30,0,0,20"
                              IsEnabled="{Binding EnableAutoLock}">
                        <TextBlock Text="Lock after" 
                                 VerticalAlignment="Center"
                                 Margin="0,0,10,0"/>
                        <TextBox Text="{Binding AutoLockMinutes}"
                               Width="60"
                               Padding="5"/>
                        <TextBlock Text="minutes" 
                                 VerticalAlignment="Center"
                                 Margin="10,0,0,0"/>
                    </StackPanel>

                    <CheckBox IsChecked="{Binding EnableClipboardClear}"
                            Content="Auto-clear clipboard after copying password"
                            Margin="0,0,0,15"/>

                    <StackPanel Orientation="Horizontal"
                              Margin="30,0,0,0"
                              IsEnabled="{Binding EnableClipboardClear}">
                        <TextBlock Text="Clear after" 
                                 VerticalAlignment="Center"
                                 Margin="0,0,10,0"/>
                        <TextBox Text="{Binding ClipboardClearSeconds}"
                               Width="60"
                               Padding="5"/>
                        <TextBlock Text="seconds" 
                                 VerticalAlignment="Center"
                                 Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Data Management Section -->
            <Border Background="White"
                    CornerRadius="10"
                    Padding="25"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Data Management" 
                             FontSize="18"
                             FontWeight="SemiBold"
                             Margin="0,0,0,20"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                 Text="Database Location:" 
                                 FontWeight="SemiBold"
                                 Margin="0,0,0,15"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" 
                                 Text="{Binding DatabasePath}"
                                 TextWrapping="Wrap"
                                 Margin="0,0,0,15"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" 
                                 Text="Database Size:" 
                                 FontWeight="SemiBold"
                                 Margin="0,0,0,20"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" 
                                 Text="{Binding DatabaseSizeFormatted}"
                                 Margin="0,0,0,20"/>
                    </Grid>

                    <StackPanel Orientation="Horizontal">
                        <Button Command="{Binding BackupDatabaseCommand}"
                              Content="Backup Database"
                              Padding="15,8"
                              Margin="0,0,10,0"/>

                        <Button Command="{Binding ExportVaultCommand}"
                              Content="Export Vault"
                              Padding="15,8"
                              Margin="0,0,10,0"/>

                        <Button Command="{Binding ImportVaultCommand}"
                              Content="Import Vault"
                              Padding="15,8"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Advanced Section -->
            <Border Background="White"
                    CornerRadius="10"
                    Padding="25">
                <StackPanel>
                    <TextBlock Text="Advanced" 
                             FontSize="18"
                             FontWeight="SemiBold"
                             Margin="0,0,0,20"/>

                    <Button Command="{Binding OpenLogsFolderCommand}"
                          Content="Open Logs Folder"
                          Padding="15,8"
                          HorizontalAlignment="Left"
                          Margin="0,0,0,20"/>

                    <Button Command="{Binding SaveSettingsCommand}"
                          Style="{StaticResource PrimaryButton}"
                          Content="Save Settings"
                          Padding="30,12"
                          HorizontalAlignment="Left"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
